{"version":3,"sources":["uni-app:///main.js","webpack:///W:/student-sys/student-management-system-c/uniapp/pages/person/person.vue?8639","webpack:///W:/student-sys/student-management-system-c/uniapp/pages/person/person.vue?d4e9","webpack:///W:/student-sys/student-management-system-c/uniapp/pages/person/person.vue?9ec6","webpack:///W:/student-sys/student-management-system-c/uniapp/pages/person/person.vue?564a","uni-app:///pages/person/person.vue","webpack:///W:/student-sys/student-management-system-c/uniapp/pages/person/person.vue?28ce","webpack:///W:/student-sys/student-management-system-c/uniapp/pages/person/person.vue?1308"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","imageUrl","user","student","stuInfo","name","password","birthday","email","phone","address","gender","mounted","JSON","methods","chooseImage","uni","count","sizeType","sourceType","success","uploadImage","url","filePath","formData","localStorage","goModifyPage","getStudentInfo","res","save","res1","title","icon","logOut"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,eAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+H;AAC/H;AAC0D;AACL;AACqC;;;AAG1F;AACsL;AACtL,gBAAgB,+LAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,6FAAM;AACR,EAAE,sGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC/BA;AAAA;AAAA;AAAA;AAAqrB,CAAgB,0sBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACgGzsB;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;IACA;EACA;EACAC;IACA,2CACAC,2CACA;IACA;EACA;EACAC;IACAC;MAAA;MACA;MACAC;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;UACA;UACA;UACA;QACA;MACA;IACA;IACAC;MAAA;MACA;MACAL;QACAM;QAAA;QACAC;QAAA;QACAlB;QAAA;QACAmB;UACA;QACA;;QACAJ;UACA;UACA;UACA;UACAK;QACA;MACA;IACA;IAEAC;MACAV;QACAM;MACA;IACA;IACAK;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA;cAAA;gBAAAC;gBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAAD;gBAAA,MACAA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;cAAA;gBAAAE;gBACA;kBACAd;oBACAe;oBACAC;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACAC;MACAjB;QACAM;MACA;MACAG;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACzLA;AAAA;AAAA;AAAA;AAAigC,CAAgB,2/BAAG,EAAC,C;;;;;;;;;;;ACArhC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/person/person.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/person/person.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./person.vue?vue&type=template&id=390a77b4&scoped=true&\"\nvar renderjs\nimport script from \"./person.vue?vue&type=script&lang=js&\"\nexport * from \"./person.vue?vue&type=script&lang=js&\"\nimport style0 from \"./person.vue?vue&type=style&index=0&id=390a77b4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"390a77b4\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/person/person.vue\"\nexport default component.exports","export * from \"-!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./person.vue?vue&type=template&id=390a77b4&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.stuInfo.name = true\n    }\n    _vm.e1 = function ($event) {\n      _vm.stuInfo.gender = true\n    }\n    _vm.e2 = function ($event) {\n      _vm.stuInfo.password = true\n    }\n    _vm.e3 = function ($event) {\n      _vm.stuInfo.birthday = true\n    }\n    _vm.e4 = function ($event) {\n      _vm.stuInfo.email = true\n    }\n    _vm.e5 = function ($event) {\n      _vm.stuInfo.phone = true\n    }\n    _vm.e6 = function ($event) {\n      _vm.stuInfo.address = true\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./person.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./person.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"container\">\n    <view class=\"avatar\">\n      <image :src=\"user.avatar\" @tap=\"chooseImage\"></image>\n    </view>\n    <view class=\"nickname\">\n      <text class=\"nickname-text\" @click=\"stuInfo.name = true\">{{\n        student.name\n      }}</text>\n    </view>\n    <el-dialog title=\"姓名\" :visible.sync=\"stuInfo.name\">\n      <el-input v-model=\"student.name\" placeholder=\"请输姓名\"></el-input>\n    </el-dialog>\n    <view class=\"info\">\n      <view class=\"item\">\n        <text class=\"item-title\">学号</text>\n        <text class=\"item-value\">{{ student.id }}</text>\n      </view>\n\n      <view class=\"item\" @click=\"stuInfo.gender = true\">\n        <text class=\"item-title\">性别</text>\n        <text class=\"item-value\">{{ student.gender }}</text>\n      </view>\n      <el-dialog title=\"性别\" :visible.sync=\"stuInfo.gender\">\n        <el-radio-group v-model=\"student.gender\">\n          <el-radio label=\"男\"></el-radio>\n          <el-radio label=\"女\"></el-radio>\n        </el-radio-group>\n      </el-dialog>\n      <view class=\"item\">\n        <text class=\"item-title\">年级</text>\n        <text class=\"item-value\">{{ student.grade }}</text>\n      </view>\n      <view class=\"item\">\n        <text class=\"item-title\">班级</text>\n        <text class=\"item-value\">{{ student.classId }}</text>\n      </view>\n      <view class=\"item\" v-if=\"student.major\">\n        <text class=\"item-title\">专业</text>\n        <text class=\"item-value\">{{ student.major }}</text>\n      </view>\n      <view class=\"item\" @click=\"stuInfo.password = true\">\n        <text class=\"item-title\">密码</text>\n        <text class=\"item-value\">{{ student.password }}</text>\n      </view>\n      <el-dialog title=\"密码\" :visible.sync=\"stuInfo.password\">\n        <el-input v-model=\"student.password\" placeholder=\"请输密码\"></el-input>\n      </el-dialog>\n      <view class=\"item\" @click=\"stuInfo.birthday = true\">\n        <text class=\"item-title\">生日</text>\n        <text class=\"item-value\">{{ student.birthday }}</text>\n      </view>\n      <el-dialog title=\"生日\" :visible.sync=\"stuInfo.birthday\">\n        <view>\n          <el-date-picker\n            type=\"date\"\n            placeholder=\"选择日期\"\n            v-model=\"student.birthday\"\n            style=\"width: 100%\"\n          ></el-date-picker>\n        </view>\n      </el-dialog>\n      <view class=\"item\" @click=\"stuInfo.email = true\">\n        <text class=\"item-title\">邮箱</text>\n        <text class=\"item-value\">{{ student.email }}</text>\n      </view>\n      <el-dialog title=\"邮箱\" :visible.sync=\"stuInfo.email\">\n        <el-input v-model=\"student.email\" placeholder=\"请输邮箱\"></el-input>\n      </el-dialog>\n      <view class=\"item\" @click=\"stuInfo.phone = true\">\n        <text class=\"item-title\">电话</text>\n        <text class=\"item-value\">{{ student.phone }}</text>\n      </view>\n      <el-dialog title=\"电话\" :visible.sync=\"stuInfo.phone\">\n        <el-input v-model=\"student.phone\" placeholder=\"请输电话\"></el-input>\n      </el-dialog>\n      <view class=\"item\" @click=\"stuInfo.address = true\">\n        <text class=\"item-title\">地址</text>\n        <text class=\"item-value\">{{ student.address }}</text>\n      </view>\n      <el-dialog title=\"地址\" :visible.sync=\"stuInfo.address\">\n        <el-input v-model=\"student.address\" placeholder=\"请输地址\"></el-input>\n      </el-dialog>\n    </view>\n    <view class=\"modify\">\n      <el-button type=\"danger\" class=\"modify-btn\" @click=\"logOut\"\n        >退出</el-button\n      >\n      <el-button type=\"success\" class=\"modify-btn\" @click=\"save\"\n        >保存</el-button\n      >\n    </view>\n  </view>\n</template>\n\n<script>\nimport moment from \"moment\";\nimport { updataUser } from \"@/api/user\";\nimport { getStuByRoleId,updatastudent } from \"@/api/student\";\nexport default {\n  data() {\n    return {\n      imageUrl:\"\",\n      user: {},\n      student: {},\n      stuInfo: {\n        name: false,\n        password: false,\n        birthday: false,\n        email: false,\n        phone: false,\n        address: false,\n        gender: false,\n      },\n    };\n  },\n  mounted() {\n    this.user = localStorage.getItem(\"user\")\n      ? JSON.parse(localStorage.getItem(\"user\"))\n      : {};\n    this.getStudentInfo();\n  },\n  methods: {\n    chooseImage() {\n    // 调用uni.chooseImage API选择图片\n    uni.chooseImage({\n      count: 1, // 默认9，设置图片的数量\n      sizeType: ['original', 'compressed'], // 可以指定是原图还是压缩图，默认二者都有\n      sourceType: ['album', 'camera'], // 可以指定来源是相册还是相机，默认二者都有\n      success: res => {\n        // 返回选定图片的临时文件路径列表\n        this.imageUrl = res.tempFilePaths[0];\n        this.uploadImage(); // 上传图片\n      }\n    });\n  },\n  uploadImage() {\n    // 调用uni.uploadFile API上传图片\n    uni.uploadFile({\n      url: 'http://localhost:9001/sms/file/upload', // 服务器URL地址\n      filePath: this.imageUrl, // 需要上传的文件路径\n      name: 'file', // 文件对应的 key，开发者在服务器端通过这个 key 可以获取到文件二进制内容\n      formData: {\n        'user': 'test' // 其他额外的表单数据\n      },\n      success: res => {\n        // 上传成功后的回调函数\n        var obj = JSON.parse(res.data);\n        this.user.avatar = obj.data;\n        localStorage.setItem(\"user\", JSON.stringify(this.user));\n      }\n    });\n  },\n\n    goModifyPage() {\n      uni.navigateTo({\n        url: \"/pages/modify-info/modify-info\",\n      });\n    },\n    async getStudentInfo() {\n      const res = await getStuByRoleId(this.user.roleId);\n      if (res.code == 200) {\n        this.student = res.data;\n      }\n    },\n    async save() {\n      this.student.birthday = moment(this.student.birthday).add(1, \"day\");\n      const res = await updatastudent(this.student)\n      if(res.code == 200) {\n        const res1 = await updataUser(this.user);\n        if(res1.code == 200) {\n          uni.showToast({\n          title: \"修改成功\",\n          icon: \"success\",\n        });\n        }\n      }\n    },\n    logOut() {\n      uni.navigateTo({\n        url: \"/pages/login/login\",\n      });\n      localStorage.removeItem(\"user\");\n    },\n  },\n};\n</script>\n\n<style scoped>\n.container {\n  padding: 30px;\n  background-color: #fff;\n}\n.avatar {\n  width: 100px;\n  /* height: 100px; */\n  border-radius: 50%;\n  margin-right: 30px;\n}\n.nickname {\n  margin-top: 20px;\n}\n.nickname-text {\n  font-size: 18px;\n  font-weight: bold;\n}\n.info {\n  margin-top: 20px;\n}\n.item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-top: 10px;\n  height: 40px;\n  padding: 0 20px;\n  /* border: 1px solid #8080804f; */\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n}\n.item-title {\n  font-size: 14px;\n  font-weight: bold;\n  margin-right: 10px;\n}\n.item-value {\n  font-size: 14px;\n  color: #888;\n}\n.modify {\n  display: flex;\n  justify-content: space-between;\n  margin-top: 30px;\n}\n.modify-btn {\n  padding: 10px 20px;\n  /* background-color: #09bb07;\n  color: #fff; */\n  border: none;\n  border-radius: 4px;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n}\n</style>\n","import mod from \"-!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./person.vue?vue&type=style&index=0&id=390a77b4&scoped=true&lang=css&\"; export default mod; export * from \"-!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\DevelopmentTool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./person.vue?vue&type=style&index=0&id=390a77b4&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1706949631641\n      var cssReload = require(\"D:/DevelopmentTool/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}